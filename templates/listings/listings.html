{% extends 'base.html' %}

{% load static %}

{% load humanize %}

{% block content %}

<div id="properties" class="property-container">
  <!-- <div class="grid-container">
    <div class="card">
      <h3>Buffalo Boy</h3>
      <h4 class="town">Silverton, CO</h4>
      <h4>$675,000</h4>
      <button id="myBtn"><img class="list" src="{% static '/img/buffaloboy.png' %}" alt="Buffalo boy property"></button>
    </div>
    <div class="card">
      <h3>Destination Ranch</h3>
      <h4 class="town">Durango, CO</h4>
      <h4>$350,000</h4>
      <img class="list" src="{% static '/img/destinationranch.png' %}" alt="destination ranch property">
    </div>
    <div class="card">
      <h3>Dolores River Ranch</h3>
      <h4 class="town">Dolores, CO</h4>
      <h4>$500,000</h4>
      <img class="list" src="{% static '/img/doloresriverranch.png' %}" alt="dolores river ranch property">
    </div>
    <div class="card">
      <h3>Dutch Boys Ranch</h3>
      <h4 class="town">Hesperus, CO</h4>
      <h4>$1,000,000</h4>
      <img class="list" src="{% static '/img/dutchboysranch.png' %}" alt="dutch boys ranch property">
    </div>
    <div class="card">
      <h3>Rusty Nail</h3>
      <h4 class="town">Durango, CO</h4>
      <h4>$1,000,000</h4>
      <button id="myBtn"><img class="list" src="{% static '/img/rustynail.png' %}" alt="rusty nail property"></button>
    </div>
    <div class="card">
      <h3>Castle Rock</h3>
      <h4 class="town">Durango, CO</h4>
      <h4>$1,000,000</h4>
      <img class="list" src="{% static '/img/castlerock.png' %}" alt="castle rock property">
    </div>
  </div>

  <div id="myModal" class="modal">

    <div class="modal-content">
      <span class="close">&times;</span>
      <h3>Buffalo Boy</h3>
      <h4 class="town">Silverton, CO</h4>
      <h4>$675,000</h4>
      <p>This is truly a unique offering located just about 5 miles from Silverton. <br><br>
        The property is comprised of 2 mining claims; Townsite and Niegold Townsite that parallel one another.
        The old Buffalo Boy Lower Tramhouse is included on the Niegold Townsite claim. A lot of history here! The Buffalo Boy
        Mine is located high above timberline and the ore was transported by tram to this lower tramhouse where it was
        transferred and transported to the mill. <br><br> The tramhouse and cable system were built circa 1929 and a portion of the
        lower tramhouse was improved into living quarters in the 1970's. The property would lend itself well to being developed into
        a destination retreat lodge and cabins. The large, substantial post and beam structure is in excellent condition and would
        serve as a solid framework upon which to improve the building into habitable space to function as a lodge.
        <br><br> This location is a gateway to high mountain recreation and would be an excellent base camp for high country activities,
        or just a scenic getaway.</p>
    </div>
  </div>

  <script>
    var modal = document.getElementById("myModal");

    var btn = document.getElementById("myBtn");

    var span = document.getElementsByClassName("close")[0];

    btn.onclick = function() {
      modal.style.display = "block";
    }

    span.onclick = function() {
      modal.style.display = "none";
    }

    window.onclick = function(event) {
      if (event.target == modal) {
        modal.style.display = "none";
      }
    }
  </script> -->

  <!-- <section id="bc" class="mt-3">
    <div class="container">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item">
            <a href="{% url 'index' %}">
              <i class="fas fa-home"></i> Home</a>
          </li>
          <li class="breadcrumb-item active"> Browse Listings</li>
        </ol>
      </nav>
    </div>
  </section> -->


  <section id="listings" class="py-4">
    <div class="container">
      <div class="row">
        {% if listings %}
          {% for listing in listings %}
          <div class="col-md-6 col-lg-4 mb-4">
            <div class="card listing-preview">
              <img class="card-img-top" src="{{ listing.photo_main.url }}" alt="">
              <div class="card-img-overlay">
                <h3 class="price">
                  <span class="badge badge-secondary text-white">${{ listing.price | intcomma }}</span>
                </h3>
              </div>
              <div class="card-body">
                <div class="listing-heading text-center">
                  <h4 class="text-primary">{{ listing.title }}</h4>
                  <p>
                    <i class="fas fa-map-marker text-secondary"></i> {{ listing.city }} {{ listing.state }} {{ listing.zipcode }}</p>
                </div>
                <hr>
                <div class="row py-2 text-secondary">
                  <div class="col-6">
                    <i class="fas fa-th-large"></i> Sqft: {{ listing.sqft }}</div>
                  <div class="col-6">
                    <i class="fas fa-car"></i> Garage: {{ listing.garage }}</div>
                </div>
                <div class="row py-2 text-secondary">
                  <div class="col-6">
                    <i class="fas fa-bed"></i> Bedrooms: {{ listing.bedrooms}}</div>
                  <div class="col-6">
                    <i class="fas fa-bath"></i> Bathrooms: {{ listing.bathrooms }}</div>
                </div>
                <hr>
                <div class="row py-2 text-secondary">
                  <div class="col-12">
                    <i class="fas fa-user"></i> {{ listing.realtor }}</div>
                </div>
                <!-- <div class="row text-secondary pb-2">
                  <div class="col-6">
                    <i class="fas fa-clock"></i> {{ listing.list_date | timesince }}</div>
                </div> -->
                <hr>
                <a href="{% url 'listing' listing.id %}" class="btn btn-primary btn-block">More Info</a>
              </div>
            </div>
          </div>
          {% endfor %}
        {% else %}
          <div class="col-md-12">
            <p>No Listings Avaiable</p>
          </div>
        {% endif %}
      </div>

      <div class="row">
        <div class="col-md-12">
          {% if listings.has_other_pages %}
            <ul class="pagination">
              {% if listings.has_previous %}
                <li class="page-item">
                  <a href="?page={{listings.previous_page_number}}" class="page-link">&laquo;</a>
                </li>
              {% else %}
                <li class="page-item disabled">
                  <a class="page-link">&laquo;</a>
                </li>
                {% endif %}
                {% for i in listings.paginator.page_range %}
                  {% if listings.number == i %}
                    <li class="page-item active"> 
                      <a class="page-link">{{i}}</a>
                    </li>
                  {% else %}
                    <li class="page-item">
                      <a href="?page={{i}}" class="page-link">{{i}}</a>
                    </li>
                  {% endif %}
                {% endfor %}
                {% if listings.has_next %}
                  <li class="page-item">
                    <a href="?page={{listings.next_page_number}}" class="page-link">&raquo;</a>
                  </li>
                {% else %}
                  <li class="page-item disabled">
                    <a class="page-link">&raquo;</a>
                  </li>
                {% endif %}
            </ul>
          {% endif %}
        </div>
      </div>
    </div>
  </section>
{% endblock %}
